<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crear nuevo set</title>
  <link rel="stylesheet" href="css\generador_sets.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jacquarda+Bastarda+9&family=Lexend&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1>Crear nuevo set</h1>
     <!-- Cajita principal para el nobre -->
    <div class="set-info">
      <input type="text" id="setName" placeholder="Nombre del set">
      <textarea id="setDescription" rows="3" placeholder="DescripciÃ³n del set (opcional)"></textarea>
    </div>
    <!-- Boron para crear-->
    <div class="actions">
      <button class="add-card" onclick="agregarTarjeta()">Agregar Tarjeta</button>
      <button class="save" onclick="guardarSet()">Listo</button>
    </div>

    <div class="cards" id="cards-container">
    </div>
  </div>

  <script>
    const container = document.getElementById("cards-container");

    // para agregar tarjeta
    function agregarTarjeta() {
      const card = document.createElement("div");
      card.classList.add("card");
      card.innerHTML = `
        <input type="text" placeholder="TÃ©rmino">
        <input type="text" placeholder="DefiniciÃ³n">
        <button class="delete-btn" onclick="eliminarTarjeta(this)">Eliminar</button>
      `;
      container.appendChild(card);
    }

    // para eliminar tarjeta
    function eliminarTarjeta(btn) {
      btn.parentElement.remove();
    }

    // guardar set en localStorage
    function guardarSet() {
      const nombre = document.getElementById("setName").value.trim();
      const descripcion = document.getElementById("setDescription").value.trim();

      if (!nombre) {
        alert("PonÃ© un nombre para el set ðŸ˜‰");
        return;
      }

      const colecciones = JSON.parse(localStorage.getItem("colecciones")) || [];

      const nuevaColeccion = {
        nombre: nombre,
        descripcion: descripcion || "",
        categoria: "-",            
        usuario: "Kiara",          
        fecha: new Date().toLocaleDateString(),
        ultimoAcceso: "-",
        tarjetas: []             
      };

      // para guardar tarjetas
      container.querySelectorAll(".card").forEach(card => {
        const term = card.querySelector("input:nth-child(1)").value.trim();
        const def = card.querySelector("input:nth-child(2)").value.trim();
        if (term || def) {
          nuevaColeccion.tarjetas.push({ termino: term, definicion: def });
        }
      });

      colecciones.push(nuevaColeccion);
      localStorage.setItem("colecciones", JSON.stringify(colecciones));

      // para redirigir al home
      window.location.href = "home.html";
    }
  </script>
</body>
</html>
